{% extends "base_livecode.html" %}

{% block title %}Running Backwards, Part 1: '(I love you){% endblock %}

{% block content %}

<p>
This interactive tutorial is based on my video <a href="http://youtu.be/kS_2_-E_JjU">Running Backwards, Part 1: (I love you)</a>, the first in a series of videos on relational programming.  Click the triangle below a code snippet to run the code.  Clicking on a box containing code allows you to edit and then run the code.
</p>

<p>
Enjoy!
</p>

<p>
--Will
</p>

<h2>(I love you)</h2>
<p>
Matt Might's blog post <a href="http://matt.might.net/articles/i-love-you-in-racket/">99 ways to say <code>'(I love you)</code> in Racket</a>, contains 99 expressions that evaluate to the list <code>(I love you)</code> in the <a href="http://racket-lang.org/">Racket</a> programming language.  We will be using the <a href="http://www.schemers.org/">Scheme</a> programming language instead of Racket---most of these expressions evaluate identically in both languages.
</p>

<p>Here are four Scheme expressions from Matt's blog post that evaluate to <code>(I love you)</code>.  Click the triangle below each expression to see the resulting value.</p>

<div class="live" id="love1">
(quote (I love you))</div>

<div class="live" id="love2">
(list (quote I) (quote love) (quote you))</div>

<div class="live" id="love3">
(cons 'I (cons 'love (cons 'you '())))</div>

<div class="live" id="love4">
(let ([words '(love you I)])
  (list (car (cdr (cdr words)))
        (car words)
        (car (cdr words))))</div>

<p>
Feel free to edit one of the examples above to include your own code, or paste in an example from Matt's blog post.  (Remember that not every Racket expression is a legal Scheme expression.)
</p>

<p>
To show off the power and flexibility of relational programming, let's automatically generate a Scheme expression that evaluates to <code>(I love you)</code>:
</p>

<div class="live" id="mk1">
(run 1 (expr) (evalo expr '(I love you)))</div>

<p>
Let's ask <code>evalo</code> for two answers:
</p>

<div class="live" id="mk2">
(run 2 (expr) (evalo expr '(I love you)))</div>

<p>
Let's check that the second answer is a legal Scheme expression that evaluates to <code>(I love you)</code>:
</p>

<div class="live" id="genlove1">
(list 'I 'love 'you)</div>

<p>
It's time to generate 99 Scheme expressions that evaluate to <code>(I love you)</code>!
</p>

<div class="live" id="mk3">
(run 99 (expr) (evalo expr '(I love you))) </div>

<p>
Let's check a few of those answers:
</p>

<div class="live" id="genlove2">
(car (cons '(I love you) (list)))</div>

<p>
This answer isn't a legal Scheme expression, because it contains
the side-conditions <code>(absent closure _.0)</code> and
<code>(absent closure _.1)</code>.  We won't worry about what those
side conditions mean right now.
</p>

<div class="live" id="genlove3a">
((list (car '(I . _.0)) (car '(love . _.1))
       ((lambda () 'you)))
 (absent closure _.0) (absent closure _.1))</div>

<p>
We can pull out the first part of the previous answer, which is a legal Scheme expression:
</p>

<div class="live" id="genlove3b">
(list (car '(I . _.0)) (car '(love . _.1))
      ((lambda () 'you)))</div>

<p>
The <code>_.0</code> and <code>_.1</code> in the expression above can be thought as placeholders that can be replaced with any legal Scheme expressions.  (This is true so long as we don't violate the side-conditions produced with the expression.)  The resulting expressions will still evaluate to <code>(I love you)</code>, as these two examples show:
</p>

<div class="live" id="genlove3c">
(list (car '(I . 5)) (car '(love . _.1))
     ((lambda () 'you)))</div>

<div class="live" id="genlove3d">
(list (car '(I . (a b c))) (car '(love . _.1))
     ((lambda () 'you)))</div>

<p>
Let's time how long it takes to generate 99 answers.  (On my laptop it takes around 8 milliseconds.)
</p>

<div class="live" id="time99">
(time (length (run 99 (expr) (evalo expr '(I love you)))))</div>

<p>
To be kind to the server running this code, let's try a run 99 instead of a run 999 for our
<code>(I love lamp)</code> example.
</p>

<div class="live" id="lamp1">
(run 99 (expr) (evalo expr '(I love lamp)))</div>

If we were to replace <code>run 99</code> with <code>run 999</code> in the expression above, the last answer would be:

<div class="live" id="lovelamp1">
(list (car '(I . _.0)) 'love
        ((lambda (_.1) (cdr _.1)) '(_.2 . lamp)))</div>


<p>
Just for fun, here are the first 99 Scheme expressions that evaluate to <code>(I love lamp)</code>, as generated by <code>evalo</code>.  (I have left out the side-conditions associated with these answers.)
</p> 

<div class="live" id="lovelampgen1">
'(I love lamp)</div>

<div class="live" id="lovelampgen2">
(list 'I 'love 'lamp)</div>

<div class="live" id="lovelampgen3">
(car '((I love lamp) . _.0))</div>

<div class="live" id="lovelampgen4">
(cons 'I '(love lamp))</div>

<div class="live" id="lovelampgen5">
((lambda () '(I love lamp)))</div>

<div class="live" id="lovelampgen6">
(cdr '(_.0 I love lamp))</div>

<div class="live" id="lovelampgen7">
(list (car '(I . _.0)) 'love 'lamp)</div>

<div class="live" id="lovelampgen8">
(list 'I 'love (car '(lamp . _.0)))</div>

<div class="live" id="lovelampgen9">
((lambda (_.0) '(I love lamp)) '_.1)</div>

<div class="live" id="lovelampgen10">
(car (list '(I love lamp)))</div>

<div class="live" id="lovelampgen11">
(list 'I (car '(love . _.0)) 'lamp)</div>

<div class="live" id="lovelampgen12">
((lambda (_.0) _.0) '(I love lamp))</div>

<div class="live" id="lovelampgen13">
(list 'I 'love (cdr '(_.0 . lamp)))</div>

<div class="live" id="lovelampgen14">
(list (cdr '(_.0 . I)) 'love 'lamp)</div>

<div class="live" id="lovelampgen15">
(cons (car '(I . _.0)) '(love lamp))</div>

<div class="live" id="lovelampgen16">
(list 'I 'love ((lambda () 'lamp)))</div>

<div class="live" id="lovelampgen17">
(cons 'I (list 'love 'lamp))</div>

<div class="live" id="lovelampgen18">
(if '#t '(I love lamp) _.0)</div>

<div class="live" id="lovelampgen19">
(car (list '(I love lamp) '_.0))</div>

<div class="live" id="lovelampgen20">
(list (car '(I . _.0)) 'love (car '(lamp . _.1)))</div>

<div class="live" id="lovelampgen21">
(if '#f _.0 '(I love lamp))</div>

<div class="live" id="lovelampgen22">
((lambda () (list 'I 'love 'lamp)))</div>

<div class="live" id="lovelampgen23">
(list 'I (cdr '(_.0 . love)) 'lamp)</div>

<div class="live" id="lovelampgen24">
(list (car '(I . _.0)) (car '(love . _.1)) 'lamp)</div>

<div class="live" id="lovelampgen25">
((lambda (_.0) '(I love lamp)) (list))</div>

<div class="live" id="lovelampgen26">
(list 'I (car '(love . _.0)) (car '(lamp . _.1)))</div>

<div class="live" id="lovelampgen27">
(list 'I 'love (car (list 'lamp)))</div>

<div class="live" id="lovelampgen28">
((lambda () (car '((I love lamp) . _.0))))</div>

<div class="live" id="lovelampgen29">
((lambda () (cons 'I '(love lamp))))</div>

<div class="live" id="lovelampgen30">
(list (car '(I . _.0)) 'love (cdr '(_.1 . lamp)))</div>

<div class="live" id="lovelampgen31">
(list ((lambda () 'I)) 'love 'lamp)</div>

<div class="live" id="lovelampgen32">
((lambda () ((lambda () '(I love lamp)))))</div>

<div class="live" id="lovelampgen33">
(list 'I (car '(love . _.0)) (cdr '(_.1 . lamp)))</div>

<div class="live" id="lovelampgen34">
(if #t '(I love lamp) _.0)</div>

<div class="live" id="lovelampgen35">
((lambda (_.0 _.1) '(I love lamp)) '_.2 '_.3)</div>

<div class="live" id="lovelampgen36">
(cons (cdr '(_.0 . I)) '(love lamp))</div>

<div class="live" id="lovelampgen37">
(list (car '(I . _.0)) 'love ((lambda () 'lamp)))</div>

<div class="live" id="lovelampgen38">
(car (list '(I love lamp) (list)))</div>

<div class="live" id="lovelampgen39">
(list 'I 'love ((lambda (_.0) 'lamp) '_.1))</div>

<div class="live" id="lovelampgen40">
(car (list '(I love lamp) '_.0 '_.1))</div>

<div class="live" id="lovelampgen41">
(list (cdr '(_.0 . I)) 'love (car '(lamp . _.1)))</div>

<div class="live" id="lovelampgen42">
(list 'I (car '(love . _.0)) ((lambda () 'lamp)))</div>

<div class="live" id="lovelampgen43">
(car (car '(((I love lamp) . _.0) . _.1)))</div>

<div class="live" id="lovelampgen44">
(list 'I 'love (if '#t 'lamp _.0))</div>

<div class="live" id="lovelampgen45">
(cons 'I (car '((love lamp) . _.0)))</div>

<div class="live" id="lovelampgen46">
(list 'I ((lambda () 'love)) 'lamp)</div>

<div class="live" id="lovelampgen47">
((lambda () (cdr '(_.0 I love lamp))))</div>

<div class="live" id="lovelampgen48">
(list 'I 'love ((lambda () (car '(lamp . _.0)))))</div>

<div class="live" id="lovelampgen49">
(list (cdr '(_.0 . I)) (car '(love . _.1)) 'lamp)</div>

<div class="live" id="lovelampgen50">
(list 'I 'love (car (list 'lamp '_.0)))</div>

<div class="live" id="lovelampgen51">
(list (car '(I . _.0)) (cdr '(_.1 . love)) 'lamp)</div>

<div class="live" id="lovelampgen52">
(list 'I 'love (if '#f _.0 'lamp))</div>

<div class="live" id="lovelampgen53">
(car (cons '(I love lamp) '_.0))</div>

<div class="live" id="lovelampgen54">
(cons 'I (cons 'love '(lamp)))</div>

<div class="live" id="lovelampgen55">
(list 'I (cdr '(_.0 . love)) (car '(lamp . _.1)))</div>

<div class="live" id="lovelampgen56">
(list (car '(I . _.0)) (car '(love . _.1))
      (car '(lamp . _.2)))</div>

<div class="live" id="lovelampgen57">
(cons (car '(I . _.0)) (list 'love 'lamp))</div>

<div class="live" id="lovelampgen58">
(list (car '(I . _.0)) 'love (car (list 'lamp)))</div>

<div class="live" id="lovelampgen59">
(list 'I (car '(love . _.0)) (car (list 'lamp)))</div>

<div class="live" id="lovelampgen60">
((lambda (_.0 _.1) _.1) '_.2 '(I love lamp))</div>

<div class="live" id="lovelampgen61">
(list 'I 'love ((lambda (_.0) _.0) 'lamp))</div>

<div class="live" id="lovelampgen62">
((lambda () (list (car '(I . _.0)) 'love 'lamp)))</div>

<div class="live" id="lovelampgen63">
((lambda (_.0) (list 'I 'love 'lamp)) '_.1)</div>

<div class="live" id="lovelampgen64">
(car ((lambda () '((I love lamp) . _.0))))</div>

<div class="live" id="lovelampgen65">
(cons 'I ((lambda () '(love lamp))))</div>

<div class="live" id="lovelampgen66">
(list (cdr '(_.0 . I)) 'love (cdr '(_.1 . lamp)))</div>

<div class="live" id="lovelampgen67">
(list (car (list 'I)) 'love 'lamp)</div>

<div class="live" id="lovelampgen68">
(car (list '(I love lamp) #t))</div>

<div class="live" id="lovelampgen69">
(list 'I 'love ((lambda () (cdr '(_.0 . lamp)))))</div>

<div class="live" id="lovelampgen70">
(if #f _.0 '(I love lamp))</div>

<div class="live" id="lovelampgen71">
(list 'I (cdr '(_.0 . love)) (cdr '(_.1 . lamp)))</div>

<div class="live" id="lovelampgen72">
(list (car '(I . _.0)) (car '(love . _.1))
     (cdr '(_.2 . lamp)))</div>

<div class="live" id="lovelampgen73">
(cons 'I (list 'love (car '(lamp . _.0))))</div>

<div class="live" id="lovelampgen74">
((lambda () (list 'I 'love (car '(lamp . _.0)))))</div>

<div class="live" id="lovelampgen75">
((lambda () ((lambda (_.0) '(I love lamp)) '_.1)))</div>

<div class="live" id="lovelampgen76">
(list 'I 'love (if #t 'lamp _.0))</div>

<div class="live" id="lovelampgen77">
((lambda (_.0) (car '((I love lamp) . _.1))) '_.2)</div>

<div class="live" id="lovelampgen78">
(cons ((lambda () 'I)) '(love lamp))</div>

<div class="live" id="lovelampgen79">
(cons 'I (list (car '(love . _.0)) 'lamp))</div>

<div class="live" id="lovelampgen80">
((lambda () (car (list '(I love lamp)))))</div>

<div class="live" id="lovelampgen81">
(car (list '(I love lamp) '_.0 (list)))</div>

<div class="live" id="lovelampgen82">
(list (cdr '(_.0 . I)) 'love ((lambda () 'lamp)))</div>

<div class="live" id="lovelampgen83">
((lambda () (list 'I (car '(love . _.0)) 'lamp)))</div>

<div class="live" id="lovelampgen84">
(car (list '(I love lamp) (list) '_.0))</div>

<div class="live" id="lovelampgen85">
(car (list '(I love lamp) '_.0 '_.1 '_.2))</div>

<div class="live" id="lovelampgen86">
(list 'I 'love ((lambda () ((lambda () 'lamp)))))</div>

<div class="live" id="lovelampgen87">
(car (cdr '(_.0 (I love lamp) . _.1)))</div>

<div class="live" id="lovelampgen88">
(list (car '(I . _.0)) 'love ((lambda (_.1) 'lamp) '_.2))</div>

<div class="live" id="lovelampgen89">
((lambda (_.0 _.1) _.0) '(I love lamp) '_.2)</div>

<div class="live" id="lovelampgen90">
(cons 'I (cdr '(_.0 love lamp)))</div>

<div class="live" id="lovelampgen91">
(list ((lambda () 'I)) 'love (car '(lamp . _.0)))</div>

<div class="live" id="lovelampgen92">
(car (cons '(I love lamp) (list)))</div>

<div class="live" id="lovelampgen93">
((lambda (_.0) (cons 'I '(love lamp))) '_.1)</div>

<div class="live" id="lovelampgen94">
(list 'I (car '(love . _.0)) ((lambda (_.1) 'lamp) '_.2))</div>

<div class="live" id="lovelampgen95">
(list 'I 'love (car (list 'lamp (list))))</div>

<div class="live" id="lovelampgen96">
(cdr (car '((_.0 I love lamp) . _.1)))</div>

<div class="live" id="lovelampgen97">
(list 'I (cdr '(_.0 . love)) ((lambda () 'lamp)))</div>

<div class="live" id="lovelampgen98">
(list (car '(I . _.0)) (car '(love . _.1))
     ((lambda () 'lamp)))</div>

<div class="live" id="lovelampgen99">
(list 'I 'love (car (list 'lamp '_.0 '_.1)))</div>

{% endblock %}
